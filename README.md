# Тестовое задание - пакетный менеджер

[Задание](Task.md)

## Usage
```
Usage:
  ./pm create <create-config-file>
  ./pm update <update-config-file>
```

## Make
```
make build # собрать
make test  # запустить тесты
make lint  # прогнать линтер
```

## Config
Читает конфиг в $HOME/.pm.json  
host, port, user - хост, порт, юзер для подключения по ssh  
path - директория для пакетов, относительно рабочей директории юзера  
```
{
  "host": "somehost.com",
  "port": "1234",
  "user": "alex",
  "path": "packages"
}
```


## Допущения/ограничения
* логинится только через ssh-agent
* нет возможности добавить файлы рекурсивно (нет `**`)
* при обработке `exclude` применяются регулярки (например `*.tmp` преобразуется в regexp `^.*\.tmp$`)
* хранит все пакеты в одной директории — это неэффективно. Можно было бы разбить на поддиректории n-ной глубины по именам пакетов или может быть использовать хранить архивы в sqlite
* всегда логирует в STDERR в режиме "verbose"
* версии:
  * при указании версий можно использовать только одно сравнение (например `<=1.0`, но не `>=1.0 <2.0`)
  * если версия пакета не указана, используется дефолтная `>=0.1`
  * версии указываются в формате major.minor, patch нет
  * можно было бы использовать что-нибудь готовое для semver, например https://github.com/Masterminds/semver
* можно было бы добавить вывод статистики: сколько файлов загружено/скачано, какой общий размер
* в задании в файле пакета для упаковки `packet.json` есть поле `packets`. Не уверен для чего оно должно служить, я сделал так: указанные там пакеты скачиваются и распаковываются перед обработкой `targets`, то есть являются по сути зависимостями

